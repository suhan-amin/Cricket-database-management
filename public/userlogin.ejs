<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./css/userlogin.css">
    <title>Document</title>
</head>
<body>
    <div class="Userlogin">
       
        <img class="Userlogin_logo"
            src="https://th.bing.com/th/id/OIP.W3oujmXkOi_NLWA2Ok0QJgHaFj?w=238&h=180&c=7&r=0&o=5&dpr=1.5&pid=1.7" alt="" />
        
    
        <div class="Userlogin_container">
            <h1>User Sign-in</h1>
    
            <form>
                <h5>E-mail</h5>
                <input type="email" name="email" />
                <h5>Password</h5>
                <input type="password" name="password" />
                <button type="submit" class="Userlogin_signInButton" onclick="loginuser()">Sign In</button>
            </form>
    
            <div class='SignUp'>
               
                <button class="Userlogin_registerButton" onClick><a style="text-decoration: none;" href="/userregister">
                    Create an account </a></button>
               
            </div>
        </div>
    </div>


    <script>
        

       
        async function loginuser(){

            const form = document.querySelector('form');
            const error = document.querySelector('.error'); 
            
            const email = form.email.value;
            const password = form.password.value;


            console.log(email,password)
           


          
            try {
                const res = await fetch('/login', {
                    method: 'POST',
                    body: JSON.stringify({ email, password }),
                    headers: { 'Content-Type': 'application/json' }
                });
               

                console.log(res);
                if(res.status==200){
                    location.assign('/home');
                }
                // if (res.status == 200) {
                //     console.log(22);
                //     location.assign('/indi');
                // }
                // else if (res.status == 403) {
                //     error.textContent = data;

                // }
                // else if (res.status == 404) {
                //     error.textContent = data;
                // }
                // else if (res.status == 400) {
                //     error.textContent = data.msg;
                // }
            }
            catch (err) {
                console.log(err);
            }
        }
        ;
    </script>
</body>
</html>